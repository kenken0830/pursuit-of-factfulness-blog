# TSX記事アップロード手順書

**Pursuit of Factfulness サイト更新マニュアル**  
最終更新: 2025年3月31日

## 概要

このマニュアルでは、TSXファイルをサイトにアップロードする3つの方法を説明します。状況に応じて最適な方法を選択してください。

## 前提条件

- D:\NvidiaGTCProject プロジェクトが存在すること
- 環境変数（.env.local）が正しく設定されていること
- TSXファイルにはH1タグ（`<h1>タイトル</h1>`）が含まれていること

---

## 方法1: 単一記事の自動アップロード

一度に1つの記事をアップロードするのに最適です。

### 手順

1. `auto_upload.bat` を実行します
   ```
   D:\NvidiaGTCProject\auto_upload.bat
   ```

2. TSXファイルのパスを入力します
   - 例: `C:\Users\bonny\Documents\article.tsx`

3. 確認画面でYを押してアップロードを実行

4. アップロード完了後:
   - ローカル環境: http://localhost:3000/blog/[スラグ名]
   - 本番環境: https://www.pursuit-of-factfulness.com/blog/[スラグ名]
     ※本番環境への反映には5〜10分かかります

---

## 方法2: 複数記事の一括アップロード

複数の記事をまとめてアップロードするのに最適です。

### 手順

1. 複数のTSXファイルを同じフォルダに配置
   - 推奨: `D:\NvidiaGTCProject\articles` フォルダ
   - 他のフォルダでも可能

2. `bulk_upload.bat` を実行
   ```
   D:\NvidiaGTCProject\bulk_upload.bat
   ```

3. TSXファイルが含まれるフォルダパスを入力
   - 例: `D:\NvidiaGTCProject\articles`

4. 確認画面でYを押すと、フォルダ内の全TSXファイルが処理されます

5. 完了後、1回のGitプッシュとVercelデプロイが実行されます

---

## 方法3: フォルダ監視型自動アップロード（推奨）

継続的に記事を追加する場合や、複数人で記事を管理する場合に最適です。

### 手順

1. `auto_folder_monitor.bat` を実行
   ```
   D:\NvidiaGTCProject\auto_folder_monitor.bat
   ```

2. `D:\NvidiaGTCProject\articles` フォルダにTSXファイルを追加するだけ
   - 新しいファイルが自動的に検出されます
   - 既にアップロード済みのファイルは無視されます

3. 新しいファイルが検出されたら確認画面でYを押す
   - あとは自動的にアップロード処理が行われます

4. スクリプトは常時監視状態を維持
   - 終了するには `Ctrl+C` を押します

---

## 注意事項

1. **バックアップ**
   - オリジナルのTSXファイルは `articles` フォルダに保管されます
   - システムはファイルをコピーして処理するため、オリジナルは変更されません

2. **H1タグの重要性**
   - TSXファイルには必ず `<h1>タイトル</h1>` 形式のタグを含めてください
   - H1タグがない場合は、ファイル名がタイトルとして使用されます

3. **引用符の扱い**
   - 日本語の二重引用符（"..."）を使うとエラーが発生します
   - 代わりに「...」または英語の引用符を使用してください
   - どうしても使用する場合は \"...\" とエスケープしてください

4. **アップロード記録**
   - アップロード済みファイルの記録は `processed_files.txt` に保存されます
   - 重複アップロードを防止するために使用されます

---

## トラブルシューティング

1. **アップロードは成功するが、トップページに表示されない**
   - `fix_all_issues.bat` を実行してGitHubとVercelへの反映を強制します
   - キャッシュクリア（Ctrl+F5）を実行します

2. **引用符によるエラー**
   - TSXファイル内の引用符を「」に置き換えるか、\"...\" とエスケープします

3. **GitHubプッシュエラー**
   - システムは自動的に `fix_all_issues.bat` を実行してリカバリを試みます
   - それでも解決しない場合は、fix_all_issues.batを手動で実行してください

---

## 快適な運用のために

最も効率的な使い方:

1. `auto_folder_monitor.bat` を起動したままにする
2. 記事作成後、TSXファイルを `articles` フォルダに保存するだけ
3. 自動的に記事がサイトに反映される

これにより、記事作成に集中できる環境が整います。

---

*このマニュアルに関する質問や提案があれば、システム管理者にお問い合わせください。*
